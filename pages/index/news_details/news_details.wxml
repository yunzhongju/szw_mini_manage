<import src="../../../utils/wxParse/wxParse.wxml" />
<wxs module="filter" src="../../../utils/filter/filter.wxs"></wxs>
<!-- 视频 -->
<view class="container">
	<view class="bg-white">
		<view class="videolistBox">
			<view class="detailTitle">
					<text>{{newsDetails.title}}</text>
				</view>
			<!-- <view class="videolistLogoBox">
				<image class="videolistLogo" src="{{newsDetails.imagePath}}" />
				<view class="VL_MSK flex-con align-items-center">
					<text class="text_ellipsis_two">{{newsDetails.title}}</text>
				</view>
			</view> -->
		</view>
		<view class="mainBox">
			<view class="title01">
				<text>来源：{{newsDetails.source}}</text>
				<text class="float-r">{{filter.dateFormate(newsDetails.addTime)}}</text>
			</view>
			<view class="main_text">
				<template is="wxParse" data="{{wxParseData:newsDesc.nodes}}" />
				<!-- <rich-text nodes="{{newsDetails.content}}"></rich-text> -->
			</view>
			<view>{{newsDetails.topicsInfo[0].title}}</view>
			<view class="clearfix title02 flex-con align-items-center">
				<view class="float-l title02_1 mr28">
					浏览量：{{newsDetails.readNumber}}
				</view>
				<view class="float-l title02_1">分享到：</view>
				<view class="float-l title02_2 flex-con align-items-center">
					<image src="/images/icon_WeChat.png" />
					<button 
						bindtap="handleShare"
						data-name="pageShare" 
						class="share">点击分享</button>
					微信好友
				</view>
				<!-- <view class="float-l title02_3 flex-con align-items-center">
					<image src="/images/icon_Circle.png" />
					朋友圈
				</view> -->
			</view>
		</view>
	</view>
	<!-- 评论 -->
	<view class="bg-white CommentsBox">
		<view class="CB_title01">热门评论</view>
		<view class="CB_con" wx:for="{{commentslist}}" wx:for-item="commentslist" wx:key="index">
			<view class="CB_avatar">
				<image class="videolistLogo" src="{{commentslist.headImage}}" />
			</view>
			<view class="CB_text">
				<view class="clearfix CBT_01">
					<text>{{commentslist.userName}}</text>
					<view class="float-r CBT_01_img flex-con align-items-center">
						<image wx:if="{{wxUserInfo.avatarUrl&&wxUserInfo.avatarUrl!=''}}" bindtap="{{commentslist.isPraised?'TapCommentCancenl':'TapCommentPraise'}}" data-id="{{commentslist.id}}" data-byUserId="{{commentslist.userId}}" class="icon_Tags" src="/images/icon_Tags0{{commentslist.isPraised?'2':'1'}}.png" />
						<button wx:else class="getUserInfoStyle icon_Tags" open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo">
							<image class="icon_Tags" src="/images/icon_Tags0{{commentslist.isPraised?'2':'1'}}.png" />
						</button>
						{{commentslist.likeNumber}}
					</view>
				</view>
				<view class="CBT_02">{{commentslist.content}}</view>
				<view class="CBT_03">
					{{filter.dateFormate(commentslist.addTime)}}
					<text wx:if="{{commentslist.reply&&commentslist.reply.length!=0}}" bindtap="TaptoAll_comments">
																								回复
																				</text>
					<block wx:else>
						<text wx:if="{{wxUserInfo.avatarUrl&&wxUserInfo.avatarUrl!=''}}" bindtap="TapReply" data-id="{{commentslist.id}}" data-parent-id="{{commentslist.id}}" data-uid="{{commentslist.userId}}">
																												回复TA
																								</text>
						<button wx:else class="getUserInfoStyle inline CBT_03" open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo">
							<text>回复TA</text>
						</button>
					</block>
				</view>
			</view>
		</view>
		<view class="CB_all" bindtap="TaptoAll_comments">查看全部{{commentNum}}条评论</view>
	</view>
	<view class="bg-white newlistBox">
		<view class="CB_title01">推荐新闻</view>
		<view class="clearfix flex-con flex-con-start newlist" wx:for="{{newslist}}" wx:for-item="newlist" wx:key="index" bindtap="TaptoNews_details" data-id="{{newlist.id}}">
			<view class="flex-1 newlistLeft">
				<view class='title text_ellipsis_two'>{{newlist.title}}</view>
				<view class='clearfix tip'>
					<view class="float-l tipLeft flex-con align-items-center">
						<image class="pageViews" src="/images/pageViews.png" />
						{{newlist.readNumber}}人浏览
					</view>
				</view>
			</view>
			<image class="newlistLogo" mode="aspectFill" src="{{newlist.imagePath}}" />
		</view>
	</view>
	<view class="clearfix spacing" />
	<view class="clearfix bg-white publishBox flex-con align-items-center" style="bottom:{{sendCommentsConHeight}}rpx">
		<image class="icon_editor" src="/images/icon_editor.png" />
		<input 
		wx:if="{{wxUserInfo.avatarUrl&&wxUserInfo.avatarUrl!=''}}" 
		class="PB_input" 
		bindconfirm="sendCommentsCon" 
		confirm-type="send" placeholder="说点什么吧" 
		value="{{sendCommentsConValue}}" 
		bindfocus="bindfocusConFun" 
		adjust-position="{{false}}" 
		bindblur="bindblurConFun" />
		<button wx:else class="getUserInfoStyle getUserInfoStyle_PBinput" open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo">
			说点什么吧
		</button>
		<view class="float-l PB_Icon01 flex-con align-items-center">
			{{commentNum}}
			<image bindtap="TaptoAll_comments" class="icon_message" src="/images/icon_message.png" />
		</view>
		<view class="float-l PB_Icon02 flex-con align-items-center">
			{{pariseNum}}
			<image wx:if="{{wxUserInfo.avatarUrl&&wxUserInfo.avatarUrl!=''}}" bindtap="{{isPraised?'TapCommentCancenlCon':'TapCommentPraiseCon'}}" class="ml19 icon_TagsBig" src="/images/icon_TagsBig0{{isPraised?'2':'1'}}.png" />
			<button wx:else class="getUserInfoStyle ml19 icon_TagsBig" open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo">
				<image class="icon_TagsBig" src="/images/icon_TagsBig0{{newsDetails.isPraised?'2':'1'}}.png" />
			</button>
		</view>
	</view>
</view>
<input class="comments_input {{comments_input?'show':'hidden'}}" focus="{{comments_input}}" bindblur="bindblurFun" bindconfirm="sendComments" confirm-type="send" placeholder="回复Ta" value="{{sendCommentsValue}}" bindfocus="bindfocusFun" adjust-position="{{false}}" style="bottom:{{sendCommentsHeight}}rpx" />
<view wx:if="{{share==1}}" class="back_home" bindtap="TaptoIndex">首页</view>

<!-- <view>	
	<rich-text nodes="{{newsDetails.content}}"></rich-text>
</view> -->
<view>
	<van-share-sheet
  show="{{ showShare }}"
  options="{{ options }}"
  bind:select="onSelect"
  bind:close="onClose"
/>
</view>

<!-- 海报 -->
<share-canvas 
	id="my-share" 
	detail="{{newsDetails}}"
	code="../../../../../images/live/gh_73e22f432457_430.jpg">
</share-canvas>